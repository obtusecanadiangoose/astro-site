@import "tailwindcss";
@plugin "@tailwindcss/typography";

@theme {
	--color-ink: #000000;
	--color-muted: color-mix(in oklab, var(--color-ink) 72%, transparent);
	--color-paper: #ffffff;
	--color-surface: #ffffff;
	--color-border: color-mix(in oklab, var(--color-ink) 14%, transparent);
	--radius-card: 24px;
	--grid-line: color-mix(in oklab, var(--color-ink) 10%, transparent);
}

@layer base {
	:root {
		color-scheme: light;
		background-color: var(--color-paper);
		--grid-divisions: 20;
		--grid-cell: calc(100vw / var(--grid-divisions));
		--grid-cell-x: var(--grid-cell);
		--grid-cell-y: var(--grid-cell);
		--content-columns: 19;
		--content-width: calc(var(--grid-cell) * var(--content-columns));
	}

	:root[data-theme="dark"] {
		color-scheme: dark;
		--color-ink: #f5f5f5;
		--color-muted: color-mix(in oklab, var(--color-ink) 70%, transparent);
		--color-paper: #0d0d10;
		--color-surface: #131318;
		--color-border: color-mix(in oklab, var(--color-ink) 16%, transparent);
		--grid-line: color-mix(in oklab, var(--color-ink) 10%, transparent);
	}
	*,
	*::before,
	*::after {
		box-sizing: border-box;
	}

	html {
		overflow-x: hidden;
		overflow-y: auto;
	}

	body {
		margin: 0;
		min-height: 100vh;
		display: flex;
		flex-direction: column;
		font-family: var(--font-sans);
		line-height: 1.6;
		color: var(--color-ink);
		background-color: var(--color-paper);
		overflow-x: hidden;
	} 

	a {
		color: inherit;
		text-decoration: none;
	}

	time {
  		font-family: var(--font-mono);
	}

	.sr-only {
		position: absolute;
		width: 1px;
		height: 1px;
		padding: 0;
		margin: -1px;
		overflow: hidden;
		clip: rect(0, 0, 0, 0);
		white-space: nowrap;
		border: 0;
	}

	:root[data-debug='on'] * {
		outline: 1px dashed color-mix(in oklab, var(--color-ink) 100%, transparent);
		outline-offset: -1px;
	}

	:root[data-debug='on'] body {
		background-image:
			linear-gradient(to bottom, var(--grid-line) 1px, transparent 1px),
			linear-gradient(to right, var(--grid-line) 1px, transparent 1px);
		background-size: var(--grid-cell-x) var(--grid-cell-y);
	}
}

@layer components {
 	.text-muted {
		color: var(--color-muted);
	}

	.text-subtle {
		color: color-mix(in oklab, var(--color-ink) 40%, transparent);
	}

	.hover\:text-ink:hover {
		color: var(--color-ink);
	}

	.theme-toggle {
		display: inline-flex;
		align-items: center;
		gap: 0.4rem;
		padding: 0.45rem 0.7rem;
		border: 1px solid var(--color-border);
		border-radius: 999px;
		font-size: 0.72rem;
		letter-spacing: 0.14em;
		text-transform: uppercase;
		background: color-mix(in oklab, var(--color-surface) 94%, transparent);
		cursor: pointer;
		transition: border-color 120ms ease, background-color 120ms ease;
	}

	.theme-toggle:hover {
		border-color: color-mix(in oklab, var(--color-ink) 28%, transparent);
		background: color-mix(in oklab, var(--color-ink) 6%, var(--color-surface));
	}

	.theme-toggle__dot {
		display: inline-block;
		width: 10px;
		height: 10px;
		border-radius: 999px;
		border: 1px solid var(--color-ink);
		background: var(--color-surface);
	}

	.site-shell {
		min-height: 100vh;
		display: flex;
		flex-direction: column;
		border: 1px solid var(--color-border);
		border-radius: 28px;
		background: var(--color-surface);
	}

	.site-header {
		height: calc(var(--grid-cell) / 2);
		min-height: calc(var(--grid-cell) / 2);
		display: flex;
		align-items: center;
		padding-left: calc(var(--grid-cell) / 2);
		padding-right: calc(var(--grid-cell) / 2);
	}

	@media (max-width: 720px) {
	  .site-header {
		min-height: calc(var(--grid-cell) * 2);
		padding-left: calc(var(--grid-cell) / 1);
		padding-right: calc(var(--grid-cell) / 1);
	  }

	  .hero-centered {
		min-height: calc(100vh - calc(var(--grid-cell) * 2)) !important;
	  }
	}

	.hero {
		display: grid;
		gap: 0.75rem;
		padding-bottom: 1.5rem;
		border-bottom: 1px solid var(--color-border);
		max-width: 780px;
	}

	.hero h1 {
		font-size: clamp(2.25rem, 4vw, 3.25rem);
		line-height: 1.1;
		margin: 0;
	}

	.hero-letters {
		color: transparent;
		-webkit-text-stroke: 3px white;
		text-stroke: 3px white;
		paint-order: stroke fill;

		position: relative;
		overflow: visible;
		white-space: nowrap;
	}

	.hero-letter {
		display: inline-block;
		color: transparent;
		-webkit-text-stroke: 3px white;
		text-stroke: 3px white;
		transition: color 0.2s ease, transform 0.2s ease;
		cursor: pointer;
		line-height: 1;
		margin: 0;
		padding: 0;
		vertical-align: middle;
		font-size: inherit;
		height: 1em;
		overflow: visible;
		transform-origin: center;
	}

	.hero-m-letter {
		position: relative;
		z-index: 2;
	}

	.hero-letter:hover {
		color: white;
		transform: scale(0.5625);
	}

	.hero-letter.fade-out {
		opacity: 0;
		transition: opacity 0.6s ease;
	}

	.hero-music-overlay {
		position: absolute;
		top: 0;
		left: 0;
		opacity: 0;
		transition: opacity 0.6s ease;
		pointer-events: none;
		overflow: hidden;
		z-index: 3;
	}

	/* hide scrollbars on the music overlay */
	.hero-music-overlay::-webkit-scrollbar {
		display: none;
	}
	.hero-music-overlay {
		-ms-overflow-style: none;
		scrollbar-width: none;
	}

	.hero-music-overlay.active {
		opacity: 1;
		pointer-events: auto;
	}

	.music-text {
		display: flex;
		flex-direction: column;
		gap: -0.3em;
		line-height: 1;
		align-items: center;
	}

	.music-letter {
		display: block;
		color: white;
		-webkit-text-stroke: 0px transparent;
		text-stroke: 0px transparent;
		font-size: 56.25%;
		font-weight: inherit;
		margin: 0;
		padding: 0;
		line-height: 1;
		text-align: center;
		animation: scrollMusicIn 0.6s ease forwards;
	}

	.hero-music-overlay.active .music-letter {
		animation: scrollMusicIn 0.6s ease forwards;
	}

	.hero-music-overlay:not(.active) .music-letter {
		animation: scrollMusicOut 0.6s ease forwards;
	}

	@keyframes scrollMusicIn {
		0% {
			opacity: 0;
			transform: translateY(-0.6em);
		}
		100% {
			opacity: 1;
			transform: translateY(0);
		}
	}

	@keyframes scrollMusicOut {
		0% {
			opacity: 1;
			transform: translateY(0);
		}
		100% {
			opacity: 0;
			transform: translateY(-1em);
		}
	}

	.music-letter:nth-child(1) {
		animation-delay: 0s;
	}

	.music-letter:nth-child(2) {
		animation-delay: 0.1s;
	}

	.music-letter:nth-child(3) {
		animation-delay: 0.2s;
	}

	.music-letter:nth-child(4) {
		animation-delay: 0.3s;
	}

	.music-letter:nth-child(5) {
		animation-delay: 0.4s;
	}

	.hero-music-overlay:not(.active) .music-letter:nth-child(1) {
		animation-delay: 0.4s;
	}

	.hero-music-overlay:not(.active) .music-letter:nth-child(2) {
		animation-delay: 0.3s;
	}

	.hero-music-overlay:not(.active) .music-letter:nth-child(3) {
		animation-delay: 0.2s;
	}

	.hero-music-overlay:not(.active) .music-letter:nth-child(4) {
		animation-delay: 0.1s;
	}

	.hero-music-overlay:not(.active) .music-letter:nth-child(5) {
		animation-delay: 0s;
	}

	.hero-word-spacer {
		display: inline-block;
		width: 0.3em;
		min-width: 0.3em;
	}

	.hero-word {
		display: inline-flex;
		flex-wrap: nowrap;
	}

	.hero-name-break {
		display: block;
	}

	@media (min-width: 768px) {
		.hero-word-spacer {
			width: 0.5em;
			min-width: 0.5em;
		}
	}

	.hero p {
		margin: 0;
		color: var(--color-muted);
		max-width: 60ch;
	}

	.eyebrow {
		letter-spacing: 0.38em;
		text-transform: uppercase;
		font-size: 0.65rem;
		color: var(--color-muted);
	}

	.page-nav {
		display: flex;
		flex-wrap: wrap;
		gap: 0.75rem;
		align-items: center;
	}

	.button {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		gap: 0.35rem;
		padding: 0.65rem 1.1rem;
		border-radius: 999px;
		border: 1px solid var(--color-border);
		font-weight: 600;
		font-size: 0.75rem;
		letter-spacing: 0.08em;
		text-transform: uppercase;
		background: color-mix(in oklab, var(--color-surface) 92%, transparent);
		transition: background-color 150ms ease, color 150ms ease, border-color 150ms ease,
			transform 150ms ease;
	}

	.button.primary {
		background: var(--color-ink);
		color: var(--color-surface);
		border-color: var(--color-ink);
	}

	.button.secondary {
		background: color-mix(in oklab, var(--color-ink) 6%, var(--color-surface));
		color: var(--color-ink);
	}

	.button:hover {
		transform: translateY(-1px);
		border-color: color-mix(in oklab, var(--color-ink) 28%, transparent);
	}

	.card,
	.post-card {
		border: 1px solid var(--color-border);
		background: var(--color-surface);
		border-radius: var(--radius-card);
		padding: 1.25rem;
	}

	.post-card {
		transition: transform 150ms ease;
	}

	.post-card:hover {
		transform: translateY(-2px);
	}

	.post-card-date,
	.post-meta {
		color: var(--color-muted);
		font-size: 0.9rem;
	}

	.section-heading {
		display: grid;
		gap: 0.4rem;
	}

	.section-heading h1 {
		margin: 0;
		font-size: clamp(2.2rem, 3.6vw, 2.8rem);
		line-height: 1.1;
	}

	.post-page {
		display: grid;
		gap: 2rem;
	}

	.content-shell {
		width: 100%;
		max-width: var(--content-width);
		margin: 0 auto;
		padding-left: calc(var(--grid-cell) / 2);
		padding-right: calc(var(--grid-cell) / 2);
	}

	.post-hero-image img {
		border-radius: var(--radius-card);
		border: 1px solid var(--color-border);
	}

	.post-article {
		display: grid;
		gap: 1.25rem;
		color: var(--color-ink);
	}

	.post-article p {
		margin: 0;
		color: var(--color-muted);
	}

	.post-article h2,
	.post-article h3 {
		margin: 0.25rem 0;
		line-height: 1.2;
	}
}